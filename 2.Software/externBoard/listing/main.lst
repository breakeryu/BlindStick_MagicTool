C51 COMPILER V9.01   MAIN                                                                  04/22/2023 17:26:21 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\output\main.obj
COMPILER INVOKED BY: E:\Keil_v4\C51\BIN\C51.EXE App\main.c BROWSE INCDIR(.\App;.\Mid_Driver;.\Mid_Driver\inc) DEBUG OBJE
                    -CTEXTEND PRINT(.\listing\main.lst) OBJECT(.\output\main.obj)

line level    source

   1          /*****************************************************************************/
   2          /** 
   3           * \file       uart_sendString.c
   4           * \author     Weilun Fong | wlf@zhishan-iot.tk
   5           * \author     Xiaoyu Ren
   6           * \date       
   7           * \brief      a example which shows how to send a string via UART
   8           * \note       
   9           * \version    v1.3
  10           * \ingroup    example
  11           * \remarks    test-board: TS51-V2.0; test-MCU: STC89C52RC; use TIM2 as baudrate
  12           *             generator
  13          ******************************************************************************/
  14          
  15          
  16          /*****************************************************************************
  17           *                             header file                                   *
  18           *****************************************************************************/
  19          #include "hml.h"
  20          
  21          
  22          
  23          /*****************************************************************************/
  24          /** 
  25           * \author      Weilun Fong
  26           * \date        
  27           * \brief       initial MCU
  28           * \param[in]   
  29           * \return      none
  30           * \ingroup     example
  31           * \remarks     
  32          ******************************************************************************/
  33          void sys_init(void)
  34          {
  35   1          UART_configTypeDef uc;
  36   1      
  37   1          uc.uart              = PERIPH_UART1;
  38   1          uc.portPin           = UART1_PortPin_P30_P31;
  39   1          uc.baudrate          = 9600;
  40   1          uc.baudGenerator     = PERIPH_TIM_2;
  41   1          uc.interruptState    = DISABLE;
  42   1          uc.interruptPriority = UTIL_interruptPriority_0;
  43   1          uc.mode              = UART1_mode_1;
  44   1          uc.multiBaudrate     = DISABLE;
  45   1          uc.receiveState      = ENABLE;
  46   1      
  47   1          UART_config(&uc);
  48   1          enableAllInterrupts();
  49   1      }
  50          
  51          
  52          /*****************************************************************************/
  53          /** 
  54           * \author      Weilun Fong
C51 COMPILER V9.01   MAIN                                                                  04/22/2023 17:26:21 PAGE 2   

  55           * \date        
  56           * \brief       main function
  57           * \param[in]   
  58           * \return      none
  59           * \ingroup     example
  60           * \remarks     
  61          ******************************************************************************/
  62          void main(void)
  63          {
  64   1          sys_init();
  65   1          while (true)
  66   1          {
  67   2              /* send per 500ms */
  68   2              Delay(500);
  69   2              UART_sendString(PERIPH_UART1,"H\r\n");
  70   2          }
  71   1      }
  72          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     64    ----
   CONSTANT SIZE    =      4    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     16      12
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
